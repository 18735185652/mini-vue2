{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\n\nclass Observer {\n  constructor(data) {\n    // Object.defineProperty 只能劫持已经存在的属性（vue里面会为此单独写一些api $set $delete）\n    this.walk(data)\n  }\n  walk(data) { // 循环对象对属性依次劫持\n    Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\n\n  }\n}\n\nexport function defineReactive(target, key, value) {\n  observe(value); // 对所有的对象都进行属性劫持\n  Object.defineProperty(target, key, {\n    get() {\n      console.log('用户取值了')\n      return value\n    },\n    set(newValue) { // 修改的时候 会执行set\n      if (value === newValue) return;\n      console.log('用户设置值了')\n      value = newValue\n    }\n  })\n}\n\nexport function observe(data) {\n  // 对这个对象进行劫持\n  if (typeof data !== 'object' || data == null) {\n    return;\n  }\n  console.log('data111: ', data);\n  // 如果一个对象被劫持过了，那就不需要在被劫持了（要判断一个对象是否被劫持过，可以增添一个实例用实例来判断是否被劫持过）\n\n  return new Observer(data)\n\n}\n","import { observe } from './observe/index';\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm)\n  }\n}\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key]\n    },\n    set(newValue) {\n      vm[target][key] = newValue\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === 'function' ? data.call(vm) : data;\n  vm._data = data\n  // 对数据进行劫持 vue2里采用了一个api defineProperty\n  observe(data);\n\n  // 将vm._data 用vm来代理就可以了\n  for (let key in data) {\n    proxy(vm, '_data', key);\n\n  }\n}\n","\nimport { initState } from './state'\n\nexport function initMixin(Vue) { // 就是给Vue增加init方法\n  Vue.prototype._init = function (options) { // 用于初始化操作\n    // vue vm.$options 就是获取用户的配置\n    const vm = this;\n    vm.$options = options; // 将用户的选项挂在到实例上\n\n\n    //初始化状态\n    initState(vm);\n  }\n}\n\n\n","import {initMixin} from './init'\n// 将所有的方法都耦合在一起\n\nfunction Vue(options){ // options 就是用户的选项\n  this._init(options)\n}\n\ninitMixin(Vue) // 扩展了init方法\nexport default Vue\n"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","console","log","set","newValue","initState","vm","opts","$options","initData","proxy","call","_data","initMixin","Vue","prototype","_init","options"],"mappings":"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"}